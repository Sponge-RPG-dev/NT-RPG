plugins {
    id "org.sonarqube" version "2.7"
    id 'com.github.johnrengelman.shadow' version '4.0.4'
}

group = 'cz.neumimto.rpg'
version = '2.1.0-SNAPSHOT'

dependencies {
    annotationProcessor project(':Generator')
    compile project(':API')

    compileOnly 'commons-io:commons-io:2.4'

    compileOnly 'com.google.inject:guice:4.2.2'
    compileOnly 'it.unimi.dsi:fastutil:8.2.1'

    compileOnly 'com.google.inject:guice:4.2.2'
    compileOnly 'org.slf4j:slf4j-api:1.7.26'
    compileOnly 'com.google.code.gson:gson:2.8.5'
    compile "co.aikar:acf-core:0.5.0-SNAPSHOT"

    compile 'com.squareup:javapoet:1.13.0'
    compile 'org.codehaus.janino:janino:3.1.2'

    compile group: 'net.bytebuddy', name: 'byte-buddy', version: '1.10.1'
    compileOnly 'it.unimi.dsi:fastutil:8.2.1'

    compileOnly 'org.apache.commons:commons-lang3:3.9'

    compileOnly 'org.graalvm.sdk:graal-sdk:20.0.0'
    compileOnly 'org.graalvm.js:js:20.0.0'

    testCompile 'org.graalvm.sdk:graal-sdk:20.0.0'
    testCompile 'org.graalvm.js:js:20.0.0'

    testCompile project(':Database-Persistence')

    testCompile 'com.github.JeffreyFalgout:junit5-extensions:89fa6cb1e7'
    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.4.1'
    testCompile 'org.junit.jupiter:junit-jupiter-engine:5.4.1'
    testCompile 'org.junit.jupiter:junit-jupiter-params:5.4.1'

    testCompile group: 'it.unimi.dsi', name: 'fastutil', version: '8.2.1'
    testCompile 'org.slf4j:slf4j-simple:1.7.26'
    // https://mvnrepository.com/artifact/com.google.code.gson/gson
    testCompile group: 'com.google.code.gson', name: 'gson', version: '2.8.5'

}

compileJava {
    options.compilerArgs += ["-parameters"]
    options.fork = true
    options.forkOptions.executable = 'javac'
}


compileTestJava {
    options.compilerArgs += ["-parameters"]
    options.fork = true
    options.forkOptions.executable = 'javac'
}

shadowJar {
//    relocate 'co.aikar.commands', 'cz.neumimto.acf'
}

build.dependsOn shadowJar